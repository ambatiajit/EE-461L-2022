{% extends "base.html" %}
{% block content %}

{% if not logged_in: %}
    <div style="text-align:center">
    <h1>Please login before accessing projects</h1>
    <img src="static/images/please_login.png" alt="hello-world" class="user_img">
    <p></p>
    <a href="./login">
       <button>Login</button>
    </a>
    </div>
{% else: %}
    <script>
        function openCreateProject(){
            document.getElementById("useForm").style.display = "none";
            document.getElementById("createForm").style.display = "block";
        }

        function closeCreateProject(){
            document.getElementById("createForm").style.display = "none";
        }

        function openUseProject(){
            document.getElementById("createForm").style.display = "none";
            document.getElementById("useForm").style.display = "block";
        }

        function closeUseProject(){
            document.getElementById("useForm").style.display = "none";
        }

    </script>
    <div style="text-align:center">
        <h1>Projects</h1>
        <span>
            <button onclick="openCreateProject()" id = "open">Create a New Project</button>
            <button onclick="openUseProject()" id = "open1">Use an Existing Project</button>
        </span>
    </div>

    <br>

    <!-- Show all the projects that the user can "join" -->
    {% with projects = project_manager.find() %}
        {% if projects %}
            <style>
                th, td {
                  border:1px solid black;
                }
            </style>
            <table style="text-align: center;
                          border: 1px solid black;
                          width: 40%;
                          align: center;
                          margin-left:auto;
                          margin-right:auto;">
                <tr>
                    <th>Project ID</th>
                    <th>Project Name</th>
                    <th>Project Description</th>
                </tr>
                {% for project in projects %}
                    <tr>
                        <td>{{ project['ID'] }}</td>
                        <td>{{ project['Name'] }}</td>
                        <td>{{ project['Description'] }}</td>
                    </tr>
                {% endfor %}
            </table>
            <br>
        {% endif %}
    {% endwith %}

<!--    &lt;!&ndash;Pop up window for creating and using existing project here> -->
    <div class="form-popup" id = "createForm" style="display: None; margin-top: 50px; text-align: center; color: #2F4F4F;">
        <form class = "form-container" id = "createProjectForm" method="post">
            <p>Project Name <input type = "text" name = "Project Name"></p>
            <p>Project Description <input type = "text" name = "Project Description"></p>
            <p>Project ID <input type = "text" name = "Project ID"></p>
            <button id="create"> Create </button>
        </form>
        <br>
        <button onclick="closeCreateProject()" id="close1"> Close </button>
    </div>

    <div class="form-popup" id = "useForm" style="display: None; margin-top: 50px; text-align: center; color: #2F4F4F;">
        <form class = "form-container" id = "useProjectForm" method="post">
            <p>Project ID <input type = "text"></p>
            <button id = "submit"> Submit</button>
        </form>
        <br>
        <button onclick="closeUseProject()" id="close2"> Close </button>
    </div>

{% endif %}

{% endblock %}
